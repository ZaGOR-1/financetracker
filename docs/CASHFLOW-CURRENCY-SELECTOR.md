# –í–∏–±—ñ—Ä –≤–∞–ª—é—Ç–∏ –≤ Cashflow

## –û–≥–ª—è–¥

–§—É–Ω–∫—Ü—ñ—è –¥–æ–∑–≤–æ–ª—è—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º –ø–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏ –¥–∞–Ω—ñ Cashflow –≤ –±—É–¥—å-—è–∫—ñ–π –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω—ñ–π –≤–∞–ª—é—Ç—ñ (UAH, USD, PLN, EUR), –Ω–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —ó—Ö –±–∞–∑–æ–≤–æ—ó –≤–∞–ª—é—Ç–∏.

## –î–∞—Ç–∞ –≤–ø—Ä–æ–≤–∞–¥–∂–µ–Ω–Ω—è
6 –∂–æ–≤—Ç–Ω—è 2025 —Ä.

---

## –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å

### 1. –ü—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω—ñ –≤–∞–ª—é—Ç–∏
- **UAH** (‚Ç¥) - –£–∫—Ä–∞—ó–Ω—Å—å–∫–∞ –≥—Ä–∏–≤–Ω—è
- **USD** ($) - –î–æ–ª–∞—Ä –°–®–ê
- **PLN** (z≈Ç) - –ü–æ–ª—å—Å—å–∫–∏–π –∑–ª–æ—Ç–∏–π
- **EUR** (‚Ç¨) - –Ñ–≤—Ä–æ (–ø—ñ–¥—Ç—Ä–∏–º–∫–∞ –≥–æ—Ç–æ–≤–∞, –∞–ª–µ –ø–æ–∫–∏ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è)

### 2. UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏

**–ö–Ω–æ–ø–∫–∏ –≤–∏–±–æ—Ä—É –≤–∞–ª—é—Ç–∏** —Ä–æ–∑—Ç–∞—à–æ–≤–∞–Ω—ñ –Ω–∞ –¥–∞—à–±–æ—Ä–¥—ñ –ø—ñ–¥ –Ω–∞–∑–≤–æ—é "Cashflow", –ø–æ—Ä—É—á –∑ —Ñ—ñ–ª—å—Ç—Ä–∞–º–∏ –ø–µ—Ä—ñ–æ–¥—ñ–≤:

```
–í–∞–ª—é—Ç–∞: [‚Ç¥ UAH] [$ USD] [z≈Ç PLN]
```

- **–ê–∫—Ç–∏–≤–Ω–∞ –∫–Ω–æ–ø–∫–∞**: —Å–∏–Ω—ñ–π —Ñ–æ–Ω (`bg-blue-600`)
- **–ù–µ–∞–∫—Ç–∏–≤–Ω–∞ –∫–Ω–æ–ø–∫–∞**: —Å—ñ—Ä–∏–π —Ñ–æ–Ω –∑ hover-–µ—Ñ–µ–∫—Ç–æ–º
- **–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º**: UAH

### 3. –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ –ø–µ—Ä—ñ–æ–¥–∞–º–∏

–í–∏–±—ñ—Ä –≤–∞–ª—é—Ç–∏ –ø—Ä–∞—Ü—é—î —Ä–∞–∑–æ–º –∑ —Ñ—ñ–ª—å—Ç—Ä–∞–º–∏ –ø–µ—Ä—ñ–æ–¥—ñ–≤:
- 7 –¥–Ω—ñ–≤
- 14 –¥–Ω—ñ–≤
- 30 –¥–Ω—ñ–≤
- 3 –º—ñ—Å—è—Ü—ñ
- 6 –º—ñ—Å—è—Ü—ñ–≤

–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–æ–∂–µ –∫–æ–º–±—ñ–Ω—É–≤–∞—Ç–∏ –±—É–¥—å-—è–∫–∏–π –ø–µ—Ä—ñ–æ–¥ –∑ –±—É–¥—å-—è–∫–æ—é –≤–∞–ª—é—Ç–æ—é.

---

## –¢–µ—Ö–Ω—ñ—á–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è

### Backend

#### 1. API Endpoint

**URL**: `GET /api/v1/stats/cashflow`

**–ü–∞—Ä–∞–º–µ—Ç—Ä–∏**:
```php
[
    'period' => 'nullable|string|in:7d,14d,30d,3m,6m',
    'currency' => 'nullable|string|in:UAH,USD,PLN,EUR'
]
```

**–ü—Ä–∏–∫–ª–∞–¥ –∑–∞–ø–∏—Ç—É**:
```
/api/v1/stats/cashflow?period=30d&currency=USD
```

**–í—ñ–¥–ø–æ–≤—ñ–¥—å**:
```json
{
    "success": true,
    "data": {
        "cashflow": [
            {
                "period": "2024-10-01",
                "income": 200.00,
                "expense": 15.50
            },
            ...
        ],
        "currency": "USD",
        "period": "30d"
    }
}
```

#### 2. StatsController

–§–∞–π–ª: `app/Http/Controllers/Api/StatsController.php`

```php
public function cashflow(Request $request): JsonResponse
{
    $validated = $request->validate([
        'period' => 'nullable|string|in:7d,14d,30d,3m,6m',
        'currency' => 'nullable|string|in:UAH,USD,PLN,EUR',
    ]);

    $period = $validated['period'] ?? '6m';
    $currency = $validated['currency'] ?? null;

    $result = $this->statsService->getCashflow(
        $request->user()->id,
        $period,
        $currency
    );

    return response()->json([
        'success' => true,
        'data' => [
            'cashflow' => $result['data'],
            'currency' => $result['currency'],
            'period' => $period,
        ],
    ]);
}
```

#### 3. StatsService

–§–∞–π–ª: `app/Services/StatsService.php`

**–ú–µ—Ç–æ–¥**: `getCashflow(int $userId, string $period = '6m', ?string $targetCurrency = null): array`

**–õ–æ–≥—ñ–∫–∞**:
1. –Ø–∫—â–æ `$targetCurrency` –ø–µ—Ä–µ–¥–∞–Ω–æ ‚Üí –∫–æ–Ω–≤–µ—Ä—Ç—É—î —É –≤–∫–∞–∑–∞–Ω—É –≤–∞–ª—é—Ç—É
2. –Ø–∫—â–æ `null` ‚Üí –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –±–∞–∑–æ–≤—É –≤–∞–ª—é—Ç—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (`users.default_currency`)
3. –î–ª—è –∫–æ–∂–Ω–æ—ó —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó:
   - –ü–µ—Ä–µ–≤—ñ—Ä—è—î –≤–∞–ª—é—Ç—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó
   - –Ø–∫—â–æ –≤—ñ–¥—Ä—ñ–∑–Ω—è—î—Ç—å—Å—è –≤—ñ–¥ —Ü—ñ–ª—å–æ–≤–æ—ó ‚Üí –∫–æ–Ω–≤–µ—Ä—Ç—É—î —á–µ—Ä–µ–∑ `CurrencyService`
   - –î–æ–¥–∞—î –¥–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ–≥–æ –ø–µ—Ä—ñ–æ–¥—É

**–ü—Ä–∏–∫–ª–∞–¥**:
```php
// –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—è –∫–æ–∂–Ω–æ—ó —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó
if ($transaction->currency !== $baseCurrency) {
    $amount = $this->currencyService->convert(
        $amount,
        $transaction->currency,
        $baseCurrency,
        new \DateTime($transaction->transaction_date)
    );
}
```

#### 4. Currency Conversion

**–°–µ—Ä–≤—ñ—Å**: `CurrencyService`

- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î ExchangeRate-API.com –¥–ª—è –∞–∫—Ç—É–∞–ª—å–Ω–∏—Ö –∫—É—Ä—Å—ñ–≤
- –ö–µ—à—É–≤–∞–Ω–Ω—è –Ω–∞ 1 –≥–æ–¥–∏–Ω—É
- –ü—ñ–¥—Ç—Ä–∏–º—É—î —ñ—Å—Ç–æ—Ä–∏—á–Ω—ñ –∫—É—Ä—Å–∏ (–∑–∞ –¥–∞—Ç–æ—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó)

**–ü–æ—Ç–æ—á–Ω—ñ –∫—É—Ä—Å–∏** (6 –∂–æ–≤—Ç–Ω—è 2025):
- 1,000 UAH = 24.21 USD
- 1,000 UAH = 87.77 PLN
- 1,000 USD = 41,301.30 UAH
- 1,000 PLN = 11,392.90 UAH

---

### Frontend

#### 1. HTML —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

–§–∞–π–ª: `resources/views/dashboard/index.blade.php`

```html
<!-- Currency Selector -->
<div class="flex items-center gap-2">
    <span class="text-sm text-gray-600 dark:text-gray-400">–í–∞–ª—é—Ç–∞:</span>
    <div class="flex gap-1 bg-gray-200 dark:bg-gray-700 rounded-lg p-1">
        <button onclick="changeCashflowCurrency('UAH')" 
                class="currency-btn ... bg-blue-600 text-white"
                data-currency="UAH">
            ‚Ç¥ UAH
        </button>
        <button onclick="changeCashflowCurrency('USD')" 
                class="currency-btn ..."
                data-currency="USD">
            $ USD
        </button>
        <button onclick="changeCashflowCurrency('PLN')" 
                class="currency-btn ..."
                data-currency="PLN">
            z≈Ç PLN
        </button>
    </div>
</div>
```

#### 2. JavaScript —Ñ—É–Ω–∫—Ü—ñ—ó

**–ì–ª–æ–±–∞–ª—å–Ω—ñ –∑–º—ñ–Ω–Ω—ñ**:
```javascript
let currentPeriod = '6m';
let currentCurrency = 'UAH';
```

**–§—É–Ω–∫—Ü—ñ—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö**:
```javascript
function loadCashflowData(period = '6m', currency = null) {
    currentPeriod = period;
    if (currency) {
        currentCurrency = currency;
    }
    
    const url = `/api/v1/stats/cashflow?period=${period}${currency ? '&currency=' + currency : ''}`;
    
    fetch(url, { headers, credentials: 'same-origin' })
        .then(response => response.json())
        .then(data => {
            // –û—Ç—Ä–∏–º—É—î–º–æ –≤–∞–ª—é—Ç—É –∑ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
            const currency = data.data.currency || 'UAH';
            
            // –°–∏–º–≤–æ–ª–∏ –≤–∞–ª—é—Ç
            const currencySymbols = {
                'UAH': '‚Ç¥',
                'USD': '$',
                'PLN': 'z≈Ç',
                'EUR': '‚Ç¨'
            };
            
            const currencySymbol = currencySymbols[currency] || currency;
            
            // –°—Ç–≤–æ—Ä—é—î–º–æ –≥—Ä–∞—Ñ—ñ–∫ –∑ –Ω–∞–∑–≤–æ—é "Cashflow (‚Ç¥)"
            // —Ç–∞ —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è–º –æ—Å—ñ Y: "5,000 ‚Ç¥"
        });
}
```

**–§—É–Ω–∫—Ü—ñ—è –∑–º—ñ–Ω–∏ –≤–∞–ª—é—Ç–∏**:
```javascript
window.changeCashflowCurrency = function(currency) {
    currentCurrency = currency;
    
    // –û–Ω–æ–≤–ª—é—î–º–æ —Å—Ç–∏–ª—ñ –∫–Ω–æ–ø–æ–∫
    document.querySelectorAll('.currency-btn').forEach(btn => {
        if (btn.dataset.currency === currency) {
            btn.classList.add('bg-blue-600', 'text-white');
        } else {
            btn.classList.remove('bg-blue-600', 'text-white');
        }
    });
    
    // –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ –Ω–æ–≤—ñ –¥–∞–Ω—ñ
    loadCashflowData(currentPeriod, currency);
};
```

#### 3. CSS —Å—Ç–∏–ª—ñ

```css
/* Currency buttons */
.currency-btn {
    transition: all 0.2s ease;
}

.currency-btn:not(.bg-blue-600) {
    color: #374151;
}

.dark .currency-btn:not(.bg-blue-600) {
    color: #d1d5db;
}

.currency-btn:not(.bg-blue-600):hover {
    background-color: #e5e7eb;
}

.dark .currency-btn:not(.bg-blue-600):hover {
    background-color: #4b5563;
}
```

#### 4. Chart.js —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è

**–ù–∞–∑–≤–∞ –≥—Ä–∞—Ñ—ñ–∫–∞**:
```javascript
plugins: {
    title: {
        display: true,
        text: `Cashflow (${currencySymbol})`,
        color: '#f9fafb',
        font: { size: 16, weight: 'bold' }
    }
}
```

**–§–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è –æ—Å—ñ Y**:
```javascript
scales: {
    y: {
        ticks: {
            callback: function(value) {
                return value.toLocaleString('uk-UA') + ' ' + currencySymbol;
            }
        }
    }
}
```

---

## –ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### 1. –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –¥–æ—Ö–æ–¥–∏/–≤–∏—Ç—Ä–∞—Ç–∏ –≤ –¥–æ–ª–∞—Ä–∞—Ö –∑–∞ –æ—Å—Ç–∞–Ω–Ω—ñ–π –º—ñ—Å—è—Ü—å

1. –í—ñ–¥–∫—Ä–∏—Ç–∏ –¥–∞—à–±–æ—Ä–¥
2. –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ "30–¥" –≤ Period Selector
3. –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ "$ USD" –≤ Currency Selector
4. –ì—Ä–∞—Ñ—ñ–∫ –æ–Ω–æ–≤–∏—Ç—å—Å—è —ñ –ø–æ–∫–∞–∂–µ –¥–∞–Ω—ñ –≤ –¥–æ–ª–∞—Ä–∞—Ö

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
- –ù–∞–∑–≤–∞ –≥—Ä–∞—Ñ—ñ–∫–∞: "Cashflow ($)"
- –í—ñ—Å—å Y: "200.00 $", "500.50 $" —Ç–æ—â–æ
- –í—Å—ñ —Å—É–º–∏ —Å–∫–æ–Ω–≤–µ—Ä—Ç–æ–≤–∞–Ω—ñ –∑ UAH/PLN –≤ USD

### 2. –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –≤–∞–ª—é—Ç

**–°—Ü–µ–Ω–∞—Ä—ñ–π**: –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å–∫—ñ–ª—å–∫–∏ –∑–∞—Ä–æ–±–∏–≤ –∑–∞ 6 –º—ñ—Å—è—Ü—ñ–≤ –≤ —Ä—ñ–∑–Ω–∏—Ö –≤–∞–ª—é—Ç–∞—Ö

1. –í–∏–±—Ä–∞—Ç–∏ "6–º" –ø–µ—Ä—ñ–æ–¥
2. –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ "‚Ç¥ UAH" ‚Üí –ø–æ–±–∞—á–∏—Ç–∏ 53,770.23 ‚Ç¥
3. –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ "$ USD" ‚Üí –ø–æ–±–∞—á–∏—Ç–∏ 1,301.81 $
4. –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ "z≈Ç PLN" ‚Üí –ø–æ–±–∞—á–∏—Ç–∏ 4,782.74 z≈Ç

### 3. API –∑–∞–ø–∏—Ç —á–µ—Ä–µ–∑ cURL

```bash
# –û—Ç—Ä–∏–º–∞—Ç–∏ cashflow –≤ –¥–æ–ª–∞—Ä–∞—Ö –∑–∞ 3 –º—ñ—Å—è—Ü—ñ
curl -X GET "http://localhost:8000/api/v1/stats/cashflow?period=3m&currency=USD" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Accept: application/json"
```

**–í—ñ–¥–ø–æ–≤—ñ–¥—å**:
```json
{
    "success": true,
    "data": {
        "cashflow": [
            {"period": "2024-08", "income": 400.00, "expense": 45.20},
            {"period": "2024-09", "income": 550.81, "expense": 38.18},
            {"period": "2024-10", "income": 351.00, "expense": 28.00}
        ],
        "currency": "USD",
        "period": "3m"
    }
}
```

---

## –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### Automated —Ç–µ—Å—Ç

–§–∞–π–ª: `scripts/diagnostics/test-currency-selector.php`

**–ó–∞–ø—É—Å–∫**:
```bash
php scripts/diagnostics/test-currency-selector.php
```

**–©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—î—Ç—å—Å—è**:
1. –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—è –≤—Å—ñ—Ö –≤–∞–ª—é—Ç (UAH, USD, PLN)
2. –í—Å—ñ –ø–µ—Ä—ñ–æ–¥–∏ (7d, 30d, 6m)
3. –ü—Ä–∞–≤–∏–ª—å–Ω—ñ—Å—Ç—å –∫—É—Ä—Å—ñ–≤ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—ó
4. –í—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ—Å—Ç—å —Å—É–º –ø—ñ—Å–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—ó

**–ü—Ä–∏–∫–ª–∞–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É**:
```
üí± –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –≤–∞–ª—é—Ç–∏: USD
üìÖ –ü–µ—Ä—ñ–æ–¥: 30d
üíµ –í–∞–ª—é—Ç–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ: USD
üìà –ó–∞–≥–∞–ª—å–Ω—ñ –¥–æ—Ö–æ–¥–∏: 798.23 $
üìâ –ó–∞–≥–∞–ª—å–Ω—ñ –≤–∏—Ç—Ä–∞—Ç–∏: 37.53 $
üí∞ –ë–∞–ª–∞–Ω—Å: 760.70 $
üìä –ö—ñ–ª—å–∫—ñ—Å—Ç—å –ø–µ—Ä—ñ–æ–¥—ñ–≤: 30
```

### Manual —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

1. **UI —Ç–µ—Å—Ç**:
   - –í—ñ–¥–∫—Ä–∏—Ç–∏ http://localhost:8000/dashboard
   - –ü–µ—Ä–µ–º–∏–∫–∞—Ç–∏ –º—ñ–∂ –≤–∞–ª—é—Ç–∞–º–∏ ‚Üí –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –≥—Ä–∞—Ñ—ñ–∫–∞
   - –ü–µ—Ä–µ–º–∏–∫–∞—Ç–∏ –ø–µ—Ä—ñ–æ–¥–∏ ‚Üí –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤–∞–ª—é—Ç–∏

2. **–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—è —Ç–µ—Å—Ç**:
   - –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—é –≤ USD
   - –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –≤ UAH
   - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —â–æ –∫—É—Ä—Å –∑–∞—Å—Ç–æ—Å–æ–≤—É—î—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

3. **Dark mode —Ç–µ—Å—Ç**:
   - –ü–µ—Ä–µ–º–∫–Ω—É—Ç–∏ —Ç–µ–º–Ω—É —Ç–µ–º—É
   - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —â–æ –∫–Ω–æ–ø–∫–∏ –≤–∞–ª—é—Ç –≤–∏–¥–Ω–æ
   - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ hover –µ—Ñ–µ–∫—Ç–∏

---

## Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: –≤–∞–ª—é—Ç–∞ –Ω–µ –∑–º—ñ–Ω—é—î—Ç—å—Å—è

**–†—ñ—à–µ–Ω–Ω—è**:
1. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –ø–æ–º–∏–ª–∫–∏
2. –û—á–∏—Å—Ç–∏—Ç–∏ –∫–µ—à: `php artisan view:clear && php artisan cache:clear`
3. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —â–æ ExchangeRate API –ø—Ä–∞—Ü—é—î: `php scripts/diagnostics/test-api-connection.php`

### –ü—Ä–æ–±–ª–µ–º–∞: –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—è

**–†—ñ—à–µ–Ω–Ω—è**:
1. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∫—É—Ä—Å–∏ –≤ –ë–î: `php scripts/currency/check-rates.php`
2. –û–Ω–æ–≤–∏—Ç–∏ –∫—É—Ä—Å–∏: `php scripts/currency/force-api-update.php`
3. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥–∏: `tail -f storage/logs/laravel.log`

### –ü—Ä–æ–±–ª–µ–º–∞: –∫–Ω–æ–ø–∫–∏ –≤–∞–ª—é—Ç –Ω–µ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è

**–†—ñ—à–µ–Ω–Ω—è**:
1. –û—á–∏—Å—Ç–∏—Ç–∏ view –∫–µ—à: `php artisan view:clear`
2. –ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Å—Ç–æ—Ä—ñ–Ω–∫—É –∑ Ctrl+F5
3. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —â–æ Tailwind CSS –∑–∞–≤–∞–Ω—Ç–∞–∂–∏–≤—Å—è

---

## –ú–∞–π–±—É—Ç–Ω—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è

### –ö–æ—Ä–æ—Ç–∫–æ—Å—Ç—Ä–æ–∫–æ–≤—ñ
- [ ] –î–æ–¥–∞—Ç–∏ –ø—ñ–¥—Ç—Ä–∏–º–∫—É EUR (—î–≤—Ä–æ)
- [ ] –ó–∞–ø–∞–º'—è—Ç–æ–≤—É–≤–∞—Ç–∏ –≤–∏–±—Ä–∞–Ω—É –≤–∞–ª—é—Ç—É –≤ localStorage
- [ ] –î–æ–¥–∞—Ç–∏ –∞–Ω—ñ–º–∞—Ü—ñ—é –ø—Ä–∏ –ø–µ—Ä–µ–º–∏–∫–∞–Ω–Ω—ñ –≤–∞–ª—é—Ç

### –î–æ–≤–≥–æ—Å—Ç—Ä–æ–∫–æ–≤—ñ
- [ ] –ú—É–ª—å—Ç–∏–≤–∞–ª—é—Ç–Ω—ñ –≥—Ä–∞—Ñ—ñ–∫–∏ (–ø–æ–∫–∞–∑—É–≤–∞—Ç–∏ –≤—Å—ñ –≤–∞–ª—é—Ç–∏ –æ–¥–Ω–æ—á–∞—Å–Ω–æ)
- [ ] –ï–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–∏—Ö —É –≤–∏–±—Ä–∞–Ω—ñ–π –≤–∞–ª—é—Ç—ñ
- [ ] –Ü—Å—Ç–æ—Ä—ñ—è –∫—É—Ä—Å—ñ–≤ –Ω–∞ –æ–∫—Ä–µ–º—ñ–π —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ
- [ ] –ê–ª–µ—Ä—Ç–∏ –ø—Ä–æ —Ä—ñ–∑–∫—ñ –∑–º—ñ–Ω–∏ –∫—É—Ä—Å—ñ–≤

---

## API Reference

### StatsController::cashflow()

**–ú–µ—Ç–æ–¥**: `GET`  
**URL**: `/api/v1/stats/cashflow`  
**Auth**: Required (Sanctum)

**Query Parameters**:
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–±–æ–≤'—è–∑–∫–æ–≤–∏–π | –ó–Ω–∞—á–µ–Ω–Ω—è | –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º |
|----------|-----|--------------|----------|-------------------|
| period | string | –ù—ñ | 7d, 14d, 30d, 3m, 6m | 6m |
| currency | string | –ù—ñ | UAH, USD, PLN, EUR | User's default |

**Response Schema**:
```json
{
    "success": boolean,
    "data": {
        "cashflow": [
            {
                "period": string,    // "2024-10-01" or "2024-10"
                "income": float,     // –°–∫–æ–Ω–≤–µ—Ä—Ç–æ–≤–∞–Ω–∞ —Å—É–º–∞
                "expense": float     // –°–∫–æ–Ω–≤–µ—Ä—Ç–æ–≤–∞–Ω–∞ —Å—É–º–∞
            }
        ],
        "currency": string,          // –í–∞–ª—é—Ç–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
        "period": string             // –ü–æ–≤–µ—Ä–Ω—É—Ç–∏–π –ø–µ—Ä—ñ–æ–¥
    }
}
```

**Error Response**:
```json
{
    "success": false,
    "message": "Validation error",
    "errors": {
        "currency": ["The selected currency is invalid."]
    }
}
```

---

## Changelog

### [1.0.0] - 2025-10-06

#### Added
- –ö–Ω–æ–ø–∫–∏ –≤–∏–±–æ—Ä—É –≤–∞–ª—é—Ç–∏ –Ω–∞ –¥–∞—à–±–æ—Ä–¥—ñ (UAH, USD, PLN)
- –ü–∞—Ä–∞–º–µ—Ç—Ä `currency` –≤ API endpoint `/api/v1/stats/cashflow`
- –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —Ü—ñ–ª—å–æ–≤–æ—ó –≤–∞–ª—é—Ç–∏ –≤ `StatsService::getCashflow()`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—è –≤—Å—ñ—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π —É –≤–∏–±—Ä–∞–Ω—É –≤–∞–ª—é—Ç—É
- –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Å–∏–º–≤–æ–ª—É –≤–∞–ª—é—Ç–∏ –≤ –Ω–∞–∑–≤—ñ –≥—Ä–∞—Ñ—ñ–∫–∞
- –§–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è –æ—Å—ñ Y –∑ —Å–∏–º–≤–æ–ª–æ–º –≤–∞–ª—é—Ç–∏
- JavaScript —Ñ—É–Ω–∫—Ü—ñ—ó `changeCashflowCurrency()` —Ç–∞ `loadCashflowData()`
- CSS —Å—Ç–∏–ª—ñ –¥–ª—è `.currency-btn`
- –î—ñ–∞–≥–Ω–æ—Å—Ç–∏—á–Ω–∏–π —Å–∫—Ä–∏–ø—Ç `test-currency-selector.php`

#### Changed
- `loadCashflowData()` —Ç–µ–ø–µ—Ä –ø—Ä–∏–π–º–∞—î –ø–∞—Ä–∞–º–µ—Ç—Ä `currency`
- –ù–∞–∑–≤–∞ –≥—Ä–∞—Ñ—ñ–∫–∞ –∑–º—ñ–Ω–µ–Ω–∞ –∑ "üìà Cashflow" –Ω–∞ "üìà Cashflow (‚Ç¥)"
- API –≤—ñ–¥–ø–æ–≤—ñ–¥—å –≤–∫–ª—é—á–∞—î –ø–æ–ª–µ `currency`

#### Technical
- Backend: –¥–æ–¥–∞–Ω–æ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é `in:UAH,USD,PLN,EUR`
- Frontend: –≥–ª–æ–±–∞–ª—å–Ω–∞ –∑–º—ñ–Ω–Ω–∞ `currentCurrency`
- –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—è —á–µ—Ä–µ–∑ `CurrencyService` –∑ —ñ—Å—Ç–æ—Ä–∏—á–Ω–∏–º–∏ –∫—É—Ä—Å–∞–º–∏

---

## –ü–æ–≤'—è–∑–∞–Ω—ñ —Ñ–∞–π–ª–∏

### Backend
- `app/Http/Controllers/Api/StatsController.php`
- `app/Services/StatsService.php`
- `app/Services/CurrencyService.php`

### Frontend
- `resources/views/dashboard/index.blade.php`

### Tests
- `scripts/diagnostics/test-currency-selector.php`

### Documentation
- `docs/CASHFLOW-PERIOD-FILTERS.md` (–ø–æ–ø–µ—Ä–µ–¥–Ω—è —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å)
- `docs/EXCHANGERATE-API-DONE.md` (—ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è ExchangeRate API)

---

## –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

–ü–∏—Ç–∞–Ω–Ω—è —Ç–∞ –ø—Ä–æ–±–ª–µ–º–∏:
1. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é ExchangeRate API: `docs/EXCHANGERATE-API-DONE.md`
2. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫—É: `php scripts/diagnostics/test-currency-selector.php`
3. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥–∏: `storage/logs/laravel.log`

**–ê–≤—Ç–æ—Ä**: GitHub Copilot  
**–î–∞—Ç–∞**: 6 –∂–æ–≤—Ç–Ω—è 2025 —Ä.
